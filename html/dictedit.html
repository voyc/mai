<!doctype html>
<html>
	<head>
		<meta http-equiv=Content-Type content="text/html; charset=UTF-8">
		<meta name='viewport' content='width=device-width, initial-scale=1, maximum-scale=1'>
		<title>Dictionary Edit</title>
		<style>[hidden] {display:none ! important;}</style>

		<link href='minimal/normaleyes.css' rel='stylesheet' type='text/css'></link>
		<link href='minimal/minimal.css' rel='stylesheet' type='text/css'></link>
		<link href='minimal/theme/mahagony.css' rel='stylesheet' type='text/css'></link>
		<link href='icon/icon.css' rel='stylesheet' type='text/css'></link>
		<link href='jslib/chat.css' rel='stylesheet' type='text/css'></link>
		<link href='css/mai.css' rel='stylesheet' type='text/css'></link>
		<link href='css/hint.css' rel='stylesheet' type='text/css'></link>
		<script src="js/namespace.js"></script>
		<script src="thai/dictionary.js"></script>
		<script src="minimal/minimal.js"></script>
		<script src="jslib/dragger.js"></script>
		<script src="jslib/utils.js"></script>
		<script src='icon/icon.js'></script>
		<script src='icon/lib/menu.js'></script>
		<script src='icon/lib/gear.js'></script>
		<script src='icon/lib/user.js'></script>
		<script src='icon/lib/spinner.js'></script>
		<script src='icon/lib/speaker.js'></script>

<style>
xsection[id=content-container] label {
	display:block;
}
section[id=content-container] p {
	margin-top:.5rem;
	margin-bottom:.5rem;
}
.dedit td {
	padding-left:1rem;
	padding-right:1rem;
	padding-top:.3rem;
	padding-bottom:.3rem;
	vertical-align:top;
}
input.char {
	width:5rem;
}
.dedit textarea {
	width:100%;
}
div.field {
	border:1px solid rgb(169,169,169);
	min-height:1.5rem;
	min-width:15rem;
	padding-left:.3rem;
	padding-right:.3rem;
}
#posselect {
}
</style>
<script>
window.addEventListener('load',function(e) {
	voyc.$('pos').addEventListener('focus', function(e) {
		posopen();
	},false);
	voyc.$('posselect').addEventListener('blur', function(e) {
		posclose();
	},false);
	posset('nja');
	voyc.$('tlbtn').addEventListener('click', function(e) {
		var b = voyc.$('pronunciation').classList.contains('hidden');
		if (b) {
			voyc.$('pronunciation').classList.remove('hidden');
			voyc.$('translations').classList.add('hidden');
		}
		else {
			voyc.$('pronunciation').classList.add('hidden');
			voyc.$('translations').classList.remove('hidden');
		}
	},false);
},false);

/*
	convert from data to display format
		input data='nja'; 
		output display='noun,adj,article';
*/
function posdisplay(data) {
	var s = '';
	var a = data.split('');
	for (var i=0; i<a.length; i++) {
		if (s) s += ',';
		s += voyc.pos[a[i]];
	}
	return s;
}
function posset(indata) {
	var pos = voyc.$('pos');
	pos.setAttribute('data', indata);
	pos.value = posdisplay(indata);
}

function posopen() {
	var pos = voyc.$('pos');
	var possel = voyc.$('posselect');
	var data = pos.getAttribute('data');
	var nodes = possel.querySelectorAll('option');
	for (var i=0; i<nodes.length; i++) {
		var b = (data.includes(nodes[i].value));
		nodes[i].selected = b;
	}
	pos.classList.add('hidden');
	possel.classList.remove('hidden');
	possel.focus();
}

function posclose() {
	var pos = voyc.$('pos');
	var possel = voyc.$('posselect');
	var data = '';
	var nodes = possel.querySelectorAll('option');
	for (var i=0; i<nodes.length; i++) {
		if (nodes[i].selected) {
			data += nodes[i].value;
		}
	}
	pos.setAttribute('data', data);
	pos.value = posdisplay(data);
	pos.classList.remove('hidden');
	posselect.classList.add('hidden');
}

</script>
	</head>

	<body>
		<!---- header ----------------------------->
		<header class='fixed'>
			<div class='group'>
				<icon class='bit' type='draw' name='menu' open='leftnav-dialog'></icon>
				<div class='bit hdr' id='hdrtitle'>mai.voyc</div>
			</div>
			<div id='headeruser' initially hidden class='group tright'>
				<div class='bit' id="welcome">
					<span id="loggedinuser">LoggedInUser</span>
				</div>
				<div id='headerlogout' class='bit' id="logoutButton">
					<button class='anchor' request='logout'>Logout</a>
				</div>
				<div id='headerlogin' class='bit' id="loginOrRegister">
					<button class='anchor' request='login'>Login</button>
					<button class='anchor' request='register'>Register</button>
				</div>
				<icon type='draw' name='user' class='bit' open='user-dialog'></icon>
			</div>
			<div id='headergear' class='group tright'>
				<icon type='draw' name='gear' class='bit' open='settings-dialog'></icon>
			</div>
		</header>

		<!---- content ----------------------------->
		<section id='content-container'>
<table class='dedit'>
	<tr><td>
		<label for='thai'>Thai word</label>
	</td><td>
		<input id='thai' type='text' />
		(<span id='internals'>328,2,300</span>)
	</td></tr><tr><td>
		<label for='translit'>Transliteration</label>
	</td><td>
		<input id='translit' type='text' readonly/>
		<button id='tlbtn' toggle>show</button>
	</td></tr>
</table>

<div id='translations'>
	<p>
		<label for='components'>Components <input id='components' type='text' /></label>
		<label for='compexp'><input name='compexp' type='checkbox' id='compexp' value='co' /> Override</label>
		<button>Parse</button>
	</p>
<fieldset><legend>Translation 1</legend>
<table class='dedit'>	
	<tr><td>	
		<label for='pos'>Parts of Speech</label>
	</td><td>
		<input id='pos' type='text' data='nja'/>
		<select id='posselect' multiple class='hidden' size='8'>
			<option value='n'>noun</option>
			<option value='v'>verb</option>
			<option value='c'>conjunction</option>
			<option value='p'>preposition</option>
			<option value='j'>adjective</option>
			<option value='e'>adverb</option>
			<option value='r'>pronoun</option>
			<option value='a'>particle</option>
		</select>
	</td></tr><tr><td>
		<label for='eng'>Gloss</label>
	</td><td>
		<input id='eng' type='text' />
	</td></tr><tr><td>
		<label for='details'>Details</label
	</td><td>
		<input id='details' type='text' />
	</td></tr>
</table>
</fieldset>	
	
	<button>+ Add Translation</button>
</div>

<div id='pronunciation' class='hidden'>
	<p>
		<label for='syllables'>Syllables<input id='syllables' type='text' /></label>
		<label for='sylexp'><input name='sylexp' type='checkbox' id='compexp' value='co' /> Override</label>
		<button>Parse</button>
	</p>

	<fieldset><legend>Syllables</legend>
		<p><label for='syl1'>1: <input type='text' id='syl1'></input></label></p>
		<p><label for='syl2'>2: <input type='text' id='syl2'></input></label></p>
		<p><label for='syl3'>3: <input type='text' id='syl3'></input></label></p>
		<p><label for='mrules'>Rules: <textarea id='mrules'></textarea></label></p>
	</fieldset>

<fieldset><legend>Syllable</legend>
<table class='dedit'>
	<tr><td>
		<label for='lc'>Leading Consonant</label>
	</td><td>
		<input id='lc' type='text' class='char' />
	</td></tr><tr><td>
		<label for='vp'>Vowel Pattern</label>
	</td><td>
		<input id='vp' type='text' class='char' />
	</td></tr><tr><td>
		<label for='fc'>Final Consonant</label>
	</td><td>
		<input id='fc' type='text' class='char' />
	</td></tr><tr><td>
		<label for='tm'>Tone Mark</label>
	</td><td>
		<input id='tm' type='text' class='char' />
	</td></tr><tr><td>
		<label for='tone'>Tone
	</td><td>
		<select id='tone'>
			<option value='H'>High</option>
			<option value='M'>Mid</option>
			<option value='L'>Low</option>
			<option value='R'>Rising</option>
			<option value='F'>Falling</option>
		</select></label>
	</td></tr><tr><td>
		<label for='rules'>Rules</label>
	</td><td>
		<div id='rules' class='field'>rule 1<br/>exception<br/>ho my</div>
	</td></tr>
</table>
</fieldset>
</div>
	<button>Save</button>
	<button>Cancel</button>	

		</section>	
		<section id='comment-container' hidden>
	<label for='source'>Source: 
	<select id='source'>
		<option value='0'>unspecified</option>
		<option value='1'>by hand</option>
		<option value='2'>thai-language/starred</option>
		<option value='3'>original dict file</option>
		<option value='4'>unknown</option>
		<option value='5'>unknown</option>
	</select></label>

	<label for='level'>Level <input id='level' type='text' /></label>

	<label for='pos'>Part of Speech: 
	<select id='pos' multiple>
		<option value='n'>noun</option>
		<option value='v'>verb</option>
		<option value='c'>conjunction</option>
		<option value='p'>preposition</option>
		<option value='j'>adjective</option>
		<option value='e'>adverb</option>
		<option value='r'>pronoun</option>
		<option value='a'>particle</option>
	</select></label>
 
	<label for='type'>Type: 
	<select id='type'>
		<option value='s'>Syllable</option>
		<option value='o'>One syllable word</option>
		<option value='m'>Multi-syllable word</option>
		<option value='x'>Expression</option>
	</select>
	</label>

	<label for='type'>Syllables: 
	<select id='type'>
		<option value='o'>One</option>
		<option value='m'>Multiple</option>
	</select>
	</label>

lookup simultaneously:
	dict
	alphabet
	vowel patterns
	phrase book

manual overrides
	components: syllable breaks
	translit: pronunciation exceptions

test words
	ที่
	ประมาณ

		</section>
		<footer>
			<div class='group'>
				<a href='http://voyc.com/about' class='ftr voyc'>
					<svg viewBox="0 0 550 200" xmlns="http://www.w3.org/2000/svg"><defs><mask id="cut-out"><rect id="bg" x="0" y="0" width="100%" height="100%" fill="#fff"/><rect x="0" y="0"   width="600" height="49" fill="#000" /><rect x="0" y="149" width="180" height="29" fill="#000" /><rect x="0" y="180" width="600" height="20" fill="#000" /><path d="M450 88 L520 88 L520 140" fill="#000" /></mask></defs><g stroke="#000" stroke-width="30" fill="none" mask="url(#cut-out)"><path d="M 50 40 L 85 160 M 79 150 L164 30"/><path d="M290 40 L330 149 M290 190 L410 30"/><ellipse cx="217" cy="100" rx="38" ry="36"/><ellipse cx="460" cy="100" rx="38" ry="36"/></g></svg>
				</a>
			</div>
			<div class='group tright'>
				<a href='https://github.com/voyc/mai' class='ftr git'>
					<svg viewBox="0 0 45 16" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M18.53 12.03h-.02c.009 0 .015.01.024.011h.006l-.01-.01zm.004.011c-.093.001-.327.05-.574.05-.78 0-1.05-.36-1.05-.83V8.13h1.59c.09 0 .16-.08.16-.19v-1.7c0-.09-.08-.17-.16-.17h-1.59V3.96c0-.08-.05-.13-.14-.13h-2.16c-.09 0-.14.05-.14.13v2.17s-1.09.27-1.16.28c-.08.02-.13.09-.13.17v1.36c0 .11.08.19.17.19h1.11v3.28c0 2.44 1.7 2.69 2.86 2.69.53 0 1.17-.17 1.27-.22.06-.02.09-.09.09-.16v-1.5a.177.177 0 0 0-.146-.18zm23.696-2.2c0-1.81-.73-2.05-1.5-1.97-.6.04-1.08.34-1.08.34v3.52s.49.34 1.22.36c1.03.03 1.36-.34 1.36-2.25zm2.43-.16c0 3.43-1.11 4.41-3.05 4.41-1.64 0-2.52-.83-2.52-.83s-.04.46-.09.52c-.03.06-.08.08-.14.08h-1.48c-.1 0-.19-.08-.19-.17l.02-11.11c0-.09.08-.17.17-.17h2.13c.09 0 .17.08.17.17v3.77s.82-.53 2.02-.53l-.01-.02c1.2 0 2.97.45 2.97 3.88zm-8.72-3.61H33.84c-.11 0-.17.08-.17.19v5.44s-.55.39-1.3.39-.97-.34-.97-1.09V6.25c0-.09-.08-.17-.17-.17h-2.14c-.09 0-.17.08-.17.17v5.11c0 2.2 1.23 2.75 2.92 2.75 1.39 0 2.52-.77 2.52-.77s.05.39.08.45c.02.05.09.09.16.09h1.34c.11 0 .17-.08.17-.17l.02-7.47c0-.09-.08-.17-.19-.17zm-23.7-.01h-2.13c-.09 0-.17.09-.17.2v7.34c0 .2.13.27.3.27h1.92c.2 0 .25-.09.25-.27V6.23c0-.09-.08-.17-.17-.17zm-1.05-3.38c-.77 0-1.38.61-1.38 1.38 0 .77.61 1.38 1.38 1.38.75 0 1.36-.61 1.36-1.38 0-.77-.61-1.38-1.36-1.38zm16.49-.25h-2.11c-.09 0-.17.08-.17.17v4.09h-3.31V2.6c0-.09-.08-.17-.17-.17h-2.13c-.09 0-.17.08-.17.17v11.11c0 .09.09.17.17.17h2.13c.09 0 .17-.08.17-.17V8.96h3.31l-.02 4.75c0 .09.08.17.17.17h2.13c.09 0 .17-.08.17-.17V2.6c0-.09-.08-.17-.17-.17zM8.81 7.35v5.74c0 .04-.01.11-.06.13 0 0-1.25.89-3.31.89-2.49 0-5.44-.78-5.44-5.92S2.58 1.99 5.1 2c2.18 0 3.06.49 3.2.58.04.05.06.09.06.14L7.94 4.5c0 .09-.09.2-.2.17-.36-.11-.9-.33-2.17-.33-1.47 0-3.05.42-3.05 3.73s1.5 3.7 2.58 3.7c.92 0 1.25-.11 1.25-.11v-2.3H4.88c-.11 0-.19-.08-.19-.17V7.35c0-.09.08-.17.19-.17h3.74c.11 0 .19.08.19.17z"></path></svg>
				</a>
			</div>
		</footer>
	</body>
</html>
